<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ø§Ø¯Ø§Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± - Ø§Ù„Ø¨Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { margin: 0; display: flex; height: 100vh; font-family: 'Segoe UI', Tahoma, sans-serif; background: #eee; overflow: hidden; }
        #sidebar { width: 380px; background: #ffffff; border-left: 1px solid #ccc; overflow-y: auto; display: flex; flex-direction: column; box-shadow: 2px 0 10px rgba(0,0,0,0.1); z-index: 1000; }
        .header { background: #d32f2f; color: white; padding: 20px; text-align: center; font-size: 1.2em; font-weight: bold; position: sticky; top: 0; z-index: 10; }
        .news-item { padding: 15px; border-bottom: 1px solid #f0f0f0; cursor: pointer; transition: all 0.2s; text-decoration: none; color: inherit; display: block; }
        .news-item:hover { background: #fff5f5; border-right: 5px solid #d32f2f; }
        .news-item h4 { margin: 0 0 5px 0; color: #333; font-size: 1.1em; line-height: 1.3; }
        .news-time { font-size: 0.75em; color: #999; margin-top: 8px; display: block; }
        #map { flex-grow: 1; }
    </style>
</head>
<body>

    <div id="sidebar">
        <div class="header">ğŸ”´ Ø±Ø§Ø¯Ø§Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</div>
        <div id="news-list">
            <p style="text-align:center; padding:20px;">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ù…Ù† Ø¬Ø¯ÙˆÙ„Ùƒ...</p>
        </div>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

    <script>
        // 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        var map = L.map('map').setView([25.0, 45.0], 4); 
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        // Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø§Ù„Ø°ÙŠ ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡
        const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSwHGhFEF1yL4wxSzY3tlFFIPIvjLDkEfTrQwg4dQgr3IJNzwBANp7QOS5gkQthMnKwgfExwt_gL1Lu/pub?output=csv';

        function fetchNews() {
            Papa.parse(csvUrl, {
                download: true,
                header: true,
                complete: function(results) {
                    const data = results.data;
                    const listContainer = document.getElementById('news-list');
                    listContainer.innerHTML = ''; 

                    data.forEach(item => {
                        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© (Title, Link) ÙƒÙ…Ø§ Ù‡ÙŠ ÙÙŠ Ø¬Ø¯ÙˆÙ„ String Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
                        if(item.Title || item.title) {
                            const title = item.Title || item.title;
                            const link = item.Link || item.link || '#';
                            
                            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¨Ø± Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
                            const a = document.createElement('a');
                            a.className = 'news-item';
                            a.href = link;
                            a.target = '_blank';
                            a.innerHTML = `<h4>${title}</h4>`;
                            listContainer.appendChild(a);
                            
                            // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø¨Ø´ÙƒÙ„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ø¤Ù‚Øª Ù„Ø¨ÙŠØ§Ù† Ø§Ù„Ø¹Ù…Ù„
                            // ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù„Ø±Ø¨Ø· ÙƒÙ„ Ø¯ÙˆÙ„Ø© Ø¨Ù…ÙˆÙ‚Ø¹Ù‡Ø§
                            L.marker([20 + Math.random()*15, 30 + Math.random()*20]).addTo(map)
                             .bindPopup(`<b>${title}</b><br><a href="${link}" target="_blank">Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø¨Ø±</a>`);
                        }
                    });
                }
            });
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙÙˆØ±Ø§Ù‹
        fetchNews();
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        setInterval(fetchNews, 120000);
    </script>
</body>
</html>

